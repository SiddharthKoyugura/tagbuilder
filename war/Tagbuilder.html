<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <link type="text/css" rel="stylesheet" href="Tagbuilder.css" />
    <title>Web Application Starter Project</title>
    <script
      type="text/javascript"
      language="javascript"
      src="tagbuilder/tagbuilder.nocache.js"
    ></script>
  </head>
  <body></body>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/ws/8.5.0/ws.min.js"></script>
  <script>
    const ws = new WebSocket("ws://192.168.0.119:8000");

    var callback;

    ws.onopen = function () {
      // ws.send(JSON.stringify({ request: "elementsHierarchy", id: "" }));
    };

    ws.onmessage = function ({ data }) {
      if (data) {
        console.log(data);
        callback(data);
      }
    };

    ws.onclose = function () {
      console.log("Socket closed");
    };

    function sendMessageToServer(message, cb) {
      callback = cb;
      elementsData = null;
      console.log(message);
      ws.send(message);
    }
  </script>
</html>
